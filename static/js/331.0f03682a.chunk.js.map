{"version":3,"file":"static/js/331.0f03682a.chunk.js","mappings":"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","sources":["utils/sheetsHelpers.ts","utils/storeItems.ts","components/Store/Store.jsx","routes/shop.lazy.tsx","components/Store/useQueryPlushies.ts"],"sourcesContent":["import { z } from \"zod\";\n\nexport type SheetConfig = {\n  apiKey: string;\n  spreadsheetId: string;\n  range: string;\n};\n\nexport type ValidationError = {\n  row: number;\n  message: string;\n};\n\nconst fetchSheetData = async (config: SheetConfig) => {\n  const { apiKey, spreadsheetId, range } = config;\n  const url = `https://sheets.googleapis.com/v4/spreadsheets/${spreadsheetId}/values/${encodeURIComponent(\n    range\n  )}?key=${apiKey}`;\n\n  const response = await fetch(url);\n  if (!response.ok) {\n    throw new Error(`Failed to fetch sheet data: ${response.statusText}`);\n  }\n\n  const data = await response.json();\n  const rows = data.values;\n\n  if (!rows || rows.length < 2) {\n    throw new Error(\"Sheet is empty or missing headers\");\n  }\n\n  return rows;\n};\n\nexport const loadSheetData = async <T extends z.ZodType>(\n  config: SheetConfig,\n  schema: T\n): Promise<{\n  items: z.infer<T>[];\n  errors: ValidationError[];\n}> => {\n  try {\n    const rows = await fetchSheetData(config);\n    const [headers, ...dataRows] = rows;\n\n    const results: ({ item: z.infer<T> } | { error: ValidationError })[] =\n      dataRows.map((row: string[], index: number) => {\n        console.log(row, index);\n        try {\n          const rowData = rowToObject(headers, row);\n          const item = schema.parse(rowData);\n          return { item };\n        } catch (error) {\n          if (error instanceof z.ZodError) {\n            return {\n              error: {\n                row: index + 2,\n                message: error.errors.map((e) => e.message).join(\", \"),\n              },\n            };\n          }\n          return {\n            error: {\n              row: index + 2,\n              message: \"Unknown validation error\",\n            },\n          };\n        }\n      });\n\n    return {\n      items: results.flatMap((result) =>\n        \"item\" in result ? [result.item] : []\n      ),\n      errors: results.flatMap((result) =>\n        \"error\" in result ? [result.error] : []\n      ),\n    };\n  } catch (error) {\n    throw new Error(\n      `Failed to load sheet data: ${\n        error instanceof Error ? error.message : \"Unknown error\"\n      }`\n    );\n  }\n};\n\nconst rowToObject = (headers: string[], row: string[]) =>\n  headers.reduce(\n    (obj, header, index) => ({\n      ...obj,\n      [header]: row[index]?.trim() || \"\",\n    }),\n    {}\n  );\n","import { z } from \"zod\";\nimport { loadSheetData, ValidationError } from \"./sheetsHelpers\";\nimport {\n  SHOP_CARDS_SHEETS_CONFIG,\n  SHOP_PLUSHIES_SHEETS_CONFIG,\n} from \"../config\";\n\nconst StoreItemSchema = z.object({\n  image: z.string().min(1, \"Image URL is required\"),\n  name: z.string().min(1, \"Name is required\"),\n  basedOn: z.string().optional(),\n\n  // Transform \"TRUE\"/\"FALSE\" string to boolean\n  isBundleDeal: z\n    .string()\n    .transform((str) => str.toUpperCase())\n    .pipe(z.enum([\"TRUE\", \"FALSE\"]).transform((val) => val === \"TRUE\")),\n\n  // Optional date fields that handle string input\n  shippingStart: z\n    .string()\n    .optional()\n    .transform((str) => (str ? new Date(str) : undefined))\n    .pipe(\n      z\n        .date()\n        .optional()\n        .refine((date) => !date || !isNaN(date.getTime()), {\n          message: \"Invalid shipping start date format\",\n        })\n    ),\n\n  presaleUntil: z\n    .string()\n    .optional()\n    .transform((str) => (str ? new Date(str) : undefined))\n    .pipe(\n      z\n        .date()\n        .optional()\n        .refine((date) => !date || !isNaN(date.getTime()), {\n          message: \"Invalid presale until date format\",\n        })\n    ),\n\n  // Optional string fields\n  stargazeLink: z.string().optional(),\n  stripeLink: z.string().optional(),\n  note: z.string().optional(),\n});\n\nexport type StoreItem = z.infer<typeof StoreItemSchema>;\n\nexport const getStorePlushies = async (): Promise<\n  | { success: true; items: StoreItem[] }\n  | { success: false; errors: ValidationError[] }\n  | \"Failed to load items\"\n> => {\n  try {\n    let storeItems = await loadSheetData(\n      SHOP_PLUSHIES_SHEETS_CONFIG,\n      StoreItemSchema\n    );\n\n    if (storeItems.items.length > 0) {\n      if (storeItems.errors.length > 0)\n        console.error(\"Errors loading store items\", storeItems.errors);\n      return { success: true, items: storeItems.items };\n    }\n    return { success: false, errors: storeItems.errors };\n  } catch (error) {\n    console.error(\"Error loading store items\", error);\n    return \"Failed to load items\";\n  }\n};\n\nexport const getStoreCards = async (): Promise<\n  | { success: true; items: StoreItem[] }\n  | { success: false; errors: ValidationError[] }\n  | \"Failed to load items\"\n> => {\n  try {\n    let storeItems = await loadSheetData(\n      SHOP_CARDS_SHEETS_CONFIG,\n      StoreItemSchema\n    );\n\n    if (storeItems.items.length > 0) {\n      if (storeItems.errors.length > 0)\n        console.error(\"Errors loading store items\", storeItems.errors);\n      return { success: true, items: storeItems.items };\n    }\n    return { success: false, errors: storeItems.errors };\n  } catch (error) {\n    console.error(\"Error loading store items\", error);\n    return \"Failed to load items\";\n  }\n};\n","import { useQueryPlushies, useQueryCards } from \"./useQueryPlushies\";\n\nexport const Store = () => {\n  const { data: plushies } = useQueryPlushies();\n  const { data: cards } = useQueryCards();\n\n  console.log(\"plushies\", plushies);\n  console.log(\"cards\", cards);\n\n  const storeItems = [...(plushies?.items || []), ...(cards?.items || [])];\n\n  return (\n    <main>\n      <div className=\"d-flex flex-column justify-content-center align-items-center text-center vh-100\">\n        <h2 className=\"text-uppercase display-3 text-nowrap fw-bold mb-0\">\n          <span data-aos=\"fade\" data-aos-delay=\"350\">\n            Sneaky\n          </span>{\" \"}\n          <br />\n          <span data-aos=\"fade\" data-aos-delay=\"400\">\n            Bazaar\n          </span>\n          <br />\n        </h2>\n        <p data-aos=\"fade\" data-aos-delay=\"450\">\n          Where sneaky dreams <br />\n          come true.\n        </p>\n      </div>\n      <div className=\"row gy-5\">\n        {storeItems &&\n          storeItems.map((item, index) => (\n            <div key={index} className=\"col-12 col-md-6 col-xxl-4\">\n              <div className=\"plushie-item text-center\">\n                <img\n                  src={item.image}\n                  style={{ maxWidth: \"300\" }}\n                  alt={item.name}\n                  className=\"img-fluid mb-4\"\n                />\n                <h2 className=\"mb-0\">{item.name}</h2>\n                {item.basedOn && (\n                  <p className=\"small mb-4\">Based On: {item.basedOn}</p>\n                )}\n                {/*{item.isBundleDeal && <p>Bundle Deal</p>}\n                  {item.shippingStart && (\n                    <p>\n                      Shipping Starts:{\" \"}\n                      {new Date(item.shippingStart).toLocaleDateString()}\n                    </p>\n                  )}\n                  {item.presaleUntil && (\n                    <p>\n                      Presale Until:{\" \"}\n                      {new Date(item.presaleUntil).toLocaleDateString()}\n                    </p>\n                  )}\n                  {item.note && <p>Note: {item.note}</p>} */}\n                <p className=\"mb-2\">Buy on</p>\n                <p>\n                  {item.stargazeLink && (\n                    <a\n                      href={item.stargazeLink}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"btn btn-outline-dark\"\n                    >\n                      Stargaze\n                    </a>\n                  )}\n                  <span>&nbsp;</span>\n                  {item.stripeLink && (\n                    <a\n                      href={item.stripeLink}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"btn btn-outline-dark\"\n                    >\n                      Stripe\n                    </a>\n                  )}\n                </p>\n              </div>\n            </div>\n          ))}\n      </div>\n    </main>\n  );\n};\n","import { createLazyFileRoute } from \"@tanstack/react-router\";\nimport { Store } from \"../components/Store/Store\";\n\nexport const Route = createLazyFileRoute(\"/shop\")({\n  component: Store,\n  // head: () => ({\n  //   meta: [\n  //     {\n  //       title: 'Sneaky Shop',\n  //       description: 'Sneaky Productions Shop',\n  //       // image: `${process.env.PUBLIC_URL}/wenmoon.png`,\n  //     },\n  //   ],\n  // }),\n});\n","import { useQuery } from \"@tanstack/react-query\";\nimport { getStoreCards, getStorePlushies } from \"../../utils/storeItems\";\n\nexport const useQueryPlushies = () =>\n  useQuery({\n    queryKey: [\"plushies\"],\n    queryFn: getStorePlushies,\n    staleTime: 1000 * 60 * 60,\n  });\n\nexport const useQueryCards = () =>\n  useQuery({\n    queryKey: [\"cards\"],\n    queryFn: getStoreCards,\n    staleTime: 1000 * 60 * 60,\n  });\n"],"names":["loadSheetData","async","config","schema","rows","apiKey","spreadsheetId","range","url","encodeURIComponent","response","fetch","ok","Error","statusText","json","values","length","fetchSheetData","headers","dataRows","results","map","row","index","console","log","rowData","rowToObject","item","parse","error","z","ZodError","message","errors","e","join","items","flatMap","result","reduce","obj","header","_row$index","trim","StoreItemSchema","object","image","string","min","name","basedOn","optional","isBundleDeal","transform","str","toUpperCase","pipe","enum","val","shippingStart","Date","undefined","date","refine","isNaN","getTime","presaleUntil","stargazeLink","stripeLink","note","getStorePlushies","storeItems","SHOP_PLUSHIES_SHEETS_CONFIG","success","getStoreCards","SHOP_CARDS_SHEETS_CONFIG","Route","createLazyFileRoute","component","Store","data","plushies","useQuery","queryKey","queryFn","staleTime","cards","_jsxs","children","className","_jsx","src","style","maxWidth","alt","href","target","rel"],"sourceRoot":""}