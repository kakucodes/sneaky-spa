"use strict";(self.webpackChunksneaky_spa=self.webpackChunksneaky_spa||[]).push([[331],{51331:(e,r,s)=>{s.r(r),s.d(r,{Route:()=>h});var a=s(27915),t=s(20381),n=s(64990);const o=async(e,r)=>{try{const s=await(async e=>{const{apiKey:r,spreadsheetId:s,range:a}=e,t=`https://sheets.googleapis.com/v4/spreadsheets/${s}/values/${encodeURIComponent(a)}?key=${r}`,n=await fetch(t);if(!n.ok)throw new Error(`Failed to fetch sheet data: ${n.statusText}`);const o=(await n.json()).values;if(!o||o.length<2)throw new Error("Sheet is empty or missing headers");return o})(e),[a,...t]=s,o=t.map(((e,s)=>{console.log(e,s);try{const s=i(a,e);return{item:r.parse(s)}}catch(t){return t instanceof n.z.ZodError?{error:{row:s+2,message:t.errors.map((e=>e.message)).join(", ")}}:{error:{row:s+2,message:"Unknown validation error"}}}}));return{items:o.flatMap((e=>"item"in e?[e.item]:[])),errors:o.flatMap((e=>"error"in e?[e.error]:[]))}}catch(s){throw new Error(`Failed to load sheet data: ${s instanceof Error?s.message:"Unknown error"}`)}},i=(e,r)=>e.reduce(((e,s,a)=>{var t;return{...e,[s]:(null===(t=r[a])||void 0===t?void 0:t.trim())||""}}),{});var l=s(8811);const c=n.z.object({image:n.z.string().min(1,"Image URL is required"),name:n.z.string().min(1,"Name is required"),basedOn:n.z.string().optional(),isBundleDeal:n.z.string().transform((e=>e.toUpperCase())).pipe(n.z.enum(["TRUE","FALSE"]).transform((e=>"TRUE"===e))),shippingStart:n.z.string().optional().transform((e=>e?new Date(e):void 0)).pipe(n.z.date().optional().refine((e=>!e||!isNaN(e.getTime())),{message:"Invalid shipping start date format"})),presaleUntil:n.z.string().optional().transform((e=>e?new Date(e):void 0)).pipe(n.z.date().optional().refine((e=>!e||!isNaN(e.getTime())),{message:"Invalid presale until date format"})),stargazeLink:n.z.string().optional(),stripeLink:n.z.string().optional(),note:n.z.string().optional()}),d=async()=>{try{let e=await o(l.XB,c);return e.items.length>0?(e.errors.length>0&&console.error("Errors loading store items",e.errors),{success:!0,items:e.items}):{success:!1,errors:e.errors}}catch(e){return console.error("Error loading store items",e),"Failed to load items"}},m=async()=>{try{let e=await o(l.JI,c);return e.items.length>0?(e.errors.length>0&&console.error("Errors loading store items",e.errors),{success:!0,items:e.items}):{success:!1,errors:e.errors}}catch(e){return console.error("Error loading store items",e),"Failed to load items"}};var p=s(85582);const h=(0,a.uV)("/shop")({component:()=>{const{data:e}=(0,t.I)({queryKey:["plushies"],queryFn:d,staleTime:36e5}),{data:r}=(0,t.I)({queryKey:["cards"],queryFn:m,staleTime:36e5});console.log("plushies",e),console.log("cards",r);const s=[...(null===e||void 0===e?void 0:e.items)||[],...(null===r||void 0===r?void 0:r.items)||[]];return(0,p.jsxs)("main",{children:[(0,p.jsxs)("div",{className:"d-flex flex-column justify-content-center align-items-center text-center vh-100",children:[(0,p.jsxs)("h2",{className:"text-uppercase display-3 text-nowrap fw-bold mb-0",children:[(0,p.jsx)("span",{"data-aos":"fade","data-aos-delay":"350",children:"Sneaky"})," ",(0,p.jsx)("br",{}),(0,p.jsx)("span",{"data-aos":"fade","data-aos-delay":"400",children:"Bazaar"}),(0,p.jsx)("br",{})]}),(0,p.jsxs)("p",{"data-aos":"fade","data-aos-delay":"450",children:["Where sneaky dreams ",(0,p.jsx)("br",{}),"come true."]})]}),(0,p.jsx)("div",{className:"row gy-5",children:s&&s.map(((e,r)=>(0,p.jsx)("div",{className:"col-12 col-md-6 col-xxl-4",children:(0,p.jsxs)("div",{className:"plushie-item text-center",children:[(0,p.jsx)("img",{src:e.image,style:{maxWidth:"300"},alt:e.name,className:"img-fluid mb-4"}),(0,p.jsx)("h2",{className:"mb-0",children:e.name}),e.basedOn&&(0,p.jsxs)("p",{className:"small mb-4",children:["Based On: ",e.basedOn]}),(0,p.jsx)("p",{className:"mb-2",children:"Buy on"}),(0,p.jsxs)("p",{children:[e.stargazeLink&&(0,p.jsx)("a",{href:e.stargazeLink,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline-dark",children:"Stargaze"}),(0,p.jsx)("span",{children:"\xa0"}),e.stripeLink&&(0,p.jsx)("a",{href:e.stripeLink,target:"_blank",rel:"noopener noreferrer",className:"btn btn-outline-dark",children:"Stripe"})]})]})},r)))})]})}})}}]);
//# sourceMappingURL=331.0f03682a.chunk.js.map